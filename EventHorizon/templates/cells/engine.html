{% extends 'admin/base_site.html' %}
{% load i18n %}


{% block content %}


<script language="JavaScript">

var layers = [
	[{"pk": 1, "model": "cells.basecell", "fields": {"core": "Modells twittersphere", "layer": 0, "container": null, "name": "Twittersphere", "last_processing_cycle": null, "created_at": "2009-06-03 15:33:11", "last_update": "2009-06-03 15:33:11", "child_count": 0, "y": 200, "x": 200, "last_processing_time": "2009-06-03 15:33:11", "external_id": ""}}],
	[{"pk": 3, "model": "cells.basecell", "fields": {"core": "Agent representing Udi's world", "layer": 1, "container": 1, "name": "Udi's agent", "last_processing_cycle": null, "created_at": "2009-06-03 15:35:32", "last_update": "2009-06-03 15:35:32", "child_count": 0, "y": 100, "x": 100, "last_processing_time": "2009-06-03 15:35:32", "external_id": ""}}],
	[{"pk": 2, "model": "cells.basecell", "fields": {"core": "Udi h Bauman", "layer": 2, "container": 3, "name": "Udi", "last_processing_cycle": null, "created_at": "2009-06-03 15:35:17", "last_update": "2009-06-03 15:35:51", "child_count": 0, "y": 100, "x": 100, "last_processing_time": "2009-06-03 15:35:51", "external_id": ""}}, {"pk": 4, "model": "cells.basecell", "fields": {"core": "Yay! great review of my company beeTV in @techcrunch!", "layer": 2, "container": 3, "name": "Yay! great review of my company beeTV in @techcrunch!", "last_processing_cycle": null, "created_at": "2009-06-03 15:36:58", "last_update": "2009-06-03 15:36:58", "child_count": 0, "y": 150, "x": 150, "last_processing_time": "2009-06-03 15:36:58", "external_id": ""}}, {"pk": 5, "model": "cells.basecell", "fields": {"core": "Thanks @nivs, @alisohani!", "layer": 2, "container": 3, "name": "Thanks @nivs, @alisohani!", "last_processing_cycle": null, "created_at": "2009-06-03 15:37:34", "last_update": "2009-06-03 15:37:34", "child_count": 0, "y": 150, "x": 170, "last_processing_time": "2009-06-03 15:37:34", "external_id": ""}}],
	[]
];


function get_data() {
	var l = 2;
	var url = 'http://localhost:8000/cells/layer/1';
	
}


function draw_layer(l) {
	var layer = layers[l];
	var canvas = document.getElementById('engine');
	if (canvas.getContext){
	  var ctx = canvas.getContext('2d');
		ctx.clearRect(0, 0, 1000, 1000);
	for (i = 0; i < layer.length; i++) {
		cell = layer[i];

        ctx.beginPath();
        ctx.fillStyle = "rgb(50,200,200)";
        ctx.fillRect (cell.fields.x, cell.fields.y, 5, 5);
		ctx.closePath();
	}
	}
}

</script>


<table border="0" width="80%">
    <tr>
        <td width="30%" valign="top" align="left">
            <form>
                <p>
                    <input type="text" width="60" name="query">
                    <input type="button" value="Filter">
                </p>
            </form>
        </td>
        <td>
            <h3>{% trans 'Currently' %} {{ nagents }} {% trans ' agents are serving' %}</h3>
        </td>
    </tr>
    <tr>
        <td width="30%" valign="top" align="right">
            <br/>
            <a href="javascript:draw_layer(0)" style="background-color: #D5D5D5">Layer 0</a><br/>
            <br/>
            <a href="javascript:draw_layer(1)" style="background-color: #D5D5D5">Layer 1</a><br/>
            <br/>
            <a href="javascript:draw_layer(2)" style="background-color: #D5D5D5">Layer 2</a><br/>
            <br/>
            <a href="javascript:draw_layer(3)" style="background-color: #D5D5D5">Layer 3</a><br/>
        </td>
        <td>
            <canvas id="engine" width="1000" height="1000" style="background-color: #F5F5F5">

            </canvas>
        </td>
    </tr>
</table>


{% endblock content %}